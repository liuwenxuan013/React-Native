{"version":3,"sources":["commands/build/BaseBuilder.js"],"names":["secondsToMilliseconds","seconds","BaseBuilder","constructor","projectDir","options","wait","clearCredentials","releaseChannel","publish","command","prepareProjectInfo","run","e","BuildError","log","error","message","process","exit","commandCheckStatus","checkStatus","exp","manifest","user","UserManager","ensureLoggedInAsync","checkProjectConfig","isDetached","platform","oldestSupportedMajorVersion","Versions","oldestSupportedMajorVersionAsync","semver","major","sdkVersion","version","newestSdkVersionAsync","warn","chalk","bold","checkForBuildInProgress","buildStatus","Project","buildAsync","mode","current","publicUrl","jobs","length","err","Error","logBuildStatuses","checkStatusBeforeBuild","reuseStatus","findReusableBuildAsync","slug","canReuse","underline","downloadUrl","raw","forEach","job","i","packageExtension","UrlUtils","constructBuildLogsUrl","id","hasPriorityBuilds","numberOfRemainingPriorityBuilds","hasUnlimitedPriorityBuilds","shouldShowUpgradeInfo","priority","canPurchasePriorityBuilds","status","constructTurtleStatusUrl","artifacts","url","ensureReleaseExists","ids","duringBuild","release","getLatestReleaseAsync","owner","channel","publicationId","publishedTime","buildId","timeout","interval","spinner","start","time","Date","getTime","endTime","res","fp","compose","head","filter","getOr","succeed","text","fail","build","expIds","bundleIdentifier","opts","type","waitOpts","completedJob","artifactUrl","artifactId","constructArtifactUrl","green"],"mappings":";;;;;;;AAIA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;;;;;;;AAEA,MAAMA,qBAAqB,GAAGC,OAAO,IAAIA,OAAO,GAAG,IAAnD;;AAgBe,MAAMC,WAAN,CAAkB;AAY/BC,EAAAA,WAAW,CAACC,UAAD,EAAqBC,OAAuB,GAAG,EAA/C,EAAmD;AAAA,wCAXzC,EAWyC;;AAAA,qCAVpC;AACxBC,MAAAA,IAAI,EAAE,IADkB;AAExBC,MAAAA,gBAAgB,EAAE,KAFM;AAGxBC,MAAAA,cAAc,EAAE,SAHQ;AAIxBC,MAAAA,OAAO,EAAE;AAJe,KAUoC;;AAAA,sCAJ3C,EAI2C;;AAC5D,SAAKL,UAAL,GAAkBA,UAAlB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACD;;AAED,QAAMK,OAAN,GAAgB;AACd,QAAI;AACF,YAAM,KAAKC,kBAAL,EAAN;AACA,YAAM,KAAKC,GAAL,EAAN;AACD,KAHD,CAGE,OAAOC,CAAP,EAAU;AACV,UAAI,EAAEA,CAAC,YAAYC,qBAAf,CAAJ,EAAgC;AAC9B,cAAMD,CAAN;AACD,OAFD,MAEO;AACLE,uBAAIC,KAAJ,CAAUH,CAAC,CAACI,OAAZ;;AACAC,QAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD;AACF;AACF;;AAED,QAAMC,kBAAN,GAA2B;AACzB,QAAI;AACF,YAAM,KAAKT,kBAAL,EAAN;AACA,YAAM,KAAKU,WAAL,EAAN;AACD,KAHD,CAGE,OAAOR,CAAP,EAAU;AACV,UAAI,EAAEA,CAAC,YAAYC,qBAAf,CAAJ,EAAgC;AAC9B,cAAMD,CAAN;AACD,OAFD,MAEO;AACLE,uBAAIC,KAAJ,CAAUH,CAAC,CAACI,OAAZ;;AACAC,QAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD;AACF;AACF;;AAED,QAAMR,kBAAN,GAA0C;AACxC;AACA,UAAM;AAAEW,MAAAA;AAAF,QAAU,MAAM,mCAAoB,KAAKlB,UAAzB,CAAtB;AACA,SAAKmB,QAAL,GAAgBD,GAAhB;AACA,SAAKE,IAAL,GAAY,MAAMC,mBAAYC,mBAAZ,EAAlB;AAEA,UAAM,KAAKC,kBAAL,EAAN;AACD;;AAED,QAAMA,kBAAN,GAA0C;AACxC,QAAI,KAAKJ,QAAL,CAAcK,UAAlB,EAA8B;AAC5Bb,qBAAIC,KAAJ,CAAW,eAAc,KAAKa,QAAL,EAAgB,2CAAzC;;AACAX,MAAAA,OAAO,CAACC,IAAR,CAAa,CAAb;AACD,KAJuC,CAMxC;;;AACA,QAAIW,2BAA2B,GAAG,MAAMC,gBAASC,gCAAT,EAAxC;;AACA,QAAIC,kBAAOC,KAAP,CAAa,KAAKX,QAAL,CAAcY,UAA3B,MAA2CL,2BAA/C,EAA4E;AAC1E,UAAI;AAAEM,QAAAA;AAAF,UAAc,MAAML,gBAASM,qBAAT,EAAxB;;AACAtB,qBAAIuB,IAAJ,CACG,QAAOR,2BAA4B,YAAWS,iBAAMC,IAAN,CAC7C,YAD6C,CAE7C,qEAAoEP,kBAAOC,KAAP,CACpEE,OADoE,CAEpE,4FALJ;AAOD;AACF;;AAED,QAAMK,uBAAN,GAAgC;AAC9B,wBAAI,+CAAJ;AACA,UAAMC,WAAW,GAAG,MAAMC,eAAQC,UAAR,CAAmB,KAAKxC,UAAxB,EAAoC;AAC5DyC,MAAAA,IAAI,EAAE,QADsD;AAE5DhB,MAAAA,QAAQ,EAAE,KAAKA,QAAL,EAFkD;AAG5DiB,MAAAA,OAAO,EAAE,IAHmD;AAI5DtC,MAAAA,cAAc,EAAE,KAAKH,OAAL,CAAaG,cAJ+B;AAK5DuC,MAAAA,SAAS,EAAE,KAAK1C,OAAL,CAAa0C,SALoC;AAM5DZ,MAAAA,UAAU,EAAE,KAAKZ,QAAL,CAAcY;AANkC,KAApC,CAA1B;;AAQA,QAAIO,WAAW,CAACM,IAAZ,IAAoBN,WAAW,CAACM,IAAZ,CAAiBC,MAAzC,EAAiD;AAC/C,YAAM,KAAInC,qBAAJ,EAAe,qEAAf,CAAN;AACD;AACF;;AAED,QAAMO,WAAN,CAAkBQ,QAAgB,GAAG,KAArC,EAA2D;AACzD,wBAAI,6BAAJ;AACA,UAAMa,WAAW,GAAG,MAAMC,eAAQC,UAAR,CAAmB,KAAKxC,UAAxB,EAAoC;AAC5DyC,MAAAA,IAAI,EAAE,QADsD;AAE5DhB,MAAAA,QAF4D;AAG5DiB,MAAAA,OAAO,EAAE,KAHmD;AAI5DtC,MAAAA,cAAc,EAAE,KAAKH,OAAL,CAAaG;AAJ+B,KAApC,CAA1B;;AAOA,QAAIkC,WAAW,CAACQ,GAAhB,EAAqB;AACnB,YAAM,IAAIC,KAAJ,CAAU,sDAAV,CAAN;AACD;;AAED,QAAI,EAAET,WAAW,CAACM,IAAZ,IAAoBN,WAAW,CAACM,IAAZ,CAAiBC,MAAvC,CAAJ,EAAoD;AAClD,0BAAI,0DAAJ;AACA;AACD;;AAED,SAAKG,gBAAL,CAAsBV,WAAtB;AACD;;AAED,QAAMW,sBAAN,GAA8C;AAC5C,wBAAI,4CAAJ;AAEA,UAAMC,WAAW,GAAG,MAAMX,eAAQY,sBAAR,CACxB,KAAKlD,OAAL,CAAaG,cADW,EAExB,KAAKqB,QAAL,EAFwB,EAGxB,KAAKN,QAAL,CAAcY,UAHU,EAIxB,KAAKZ,QAAL,CAAciC,IAJU,CAA1B;;AAMA,QAAIF,WAAW,CAACG,QAAhB,EAA0B;AACxB1C,qBAAIuB,IAAJ,CAAU;uBACOC,iBAAMmB,SAAN,CACf,sEADe,CAEf,8EAHF;;AAKA3C,qBAAIuB,IAAJ,CACG,yFAAwFC,iBAAMmB,SAAN,CACvFJ,WAAW,CAACK,WAD2E,CAEvF,EAHJ;AAKD;AACF;;AAEDP,EAAAA,gBAAgB,CAACV,WAAD,EAA2E;AACzF3B,mBAAI6C,GAAJ;;AACA,wBAAI,mBAAJ;AACA,wBAAI,mBAAJ;AACA,wBAAI,qBAAJ;AACAlB,IAAAA,WAAW,CAACM,IAAZ,CAAiBa,OAAjB,CAAyB,CAACC,GAAD,EAAMC,CAAN,KAAY;AACnC,UAAIlC,QAAJ,EAAcmC,gBAAd;;AACA,UAAIF,GAAG,CAACjC,QAAJ,KAAiB,KAArB,EAA4B;AAC1BA,QAAAA,QAAQ,GAAG,KAAX;AACAmC,QAAAA,gBAAgB,GAAG,KAAnB;AACD,OAHD,MAGO;AACLnC,QAAAA,QAAQ,GAAG,SAAX;AACAmC,QAAAA,gBAAgB,GAAG,KAAnB;AACD;;AAED,0BAAK,OAAMD,CAAE,MAAKlC,QAAS,MAAKoC,QAAQ,GAACC,qBAAT,CAA+BJ,GAAG,CAACK,EAAnC,CAAuC,MAAvE;AAEA,YAAMC,iBAAiB,GACrB1B,WAAW,CAAC2B,+BAAZ,GAA8C,CAA9C,IAAmD3B,WAAW,CAAC4B,0BADjE;AAEA,YAAMC,qBAAqB,GACzB,CAACH,iBAAD,IACAL,CAAC,KAAK,CADN,IAEAD,GAAG,CAACU,QAAJ,KAAiB,QAFjB,IAGA9B,WAAW,CAAC+B,yBAJd;AAKA,UAAIC,MAAJ;;AACA,cAAQZ,GAAG,CAACY,MAAZ;AACE,aAAK,SAAL;AACA,aAAK,eAAL;AACEA,UAAAA,MAAM,GAAI,4CAA2CnC,iBAAMmB,SAAN,CACnDO,QAAQ,GAACU,wBAAT,EADmD,CAEnD,EAFF;;AAGA,cAAIJ,qBAAJ,EAA2B;AACzBG,YAAAA,MAAM,IAAK,+CAA8CnC,iBAAMmB,SAAN,CACvD,kCADuD,CAEvD,GAFF;AAGD;;AACD;;AACF,aAAK,SAAL;AACEgB,UAAAA,MAAM,GAAG,kBAAT;AACA;;AACF,aAAK,aAAL;AACEA,UAAAA,MAAM,GAAG,sBAAT;;AACA,cAAIH,qBAAJ,EAA2B;AACzBG,YAAAA,MAAM,IAAK,+CAA8CnC,iBAAMmB,SAAN,CACvD,kCADuD,CAEvD,GAFF;AAGD;;AACD;;AACF,aAAK,UAAL;AACEgB,UAAAA,MAAM,GAAG,iBAAT;;AACA,cAAIH,qBAAJ,EAA2B;AACzBG,YAAAA,MAAM,IAAK,uFAAsFnC,iBAAMmB,SAAN,CAC/F,kCAD+F,CAE/F,GAFF;AAGD;;AACD;;AACF,aAAK,SAAL;AACEgB,UAAAA,MAAM,GAAG,qCAAT;;AACA,cAAIZ,GAAG,CAACK,EAAR,EAAY;AACVO,YAAAA,MAAM,IAAK;;;;EAIrBZ,GAAG,CAACK,EAAG;CAJG;AAMD;;AACD;;AACF;AACEO,UAAAA,MAAM,GAAG,EAAT;AACA;AA5CJ;;AA+CA,0BAAIA,MAAJ;;AACA,UAAIZ,GAAG,CAACY,MAAJ,KAAe,UAAnB,EAA+B;AAC7B,YAAIZ,GAAG,CAACc,SAAR,EAAmB;AACjB,8BAAK,GAAEZ,gBAAiB,KAAIF,GAAG,CAACc,SAAJ,CAAcC,GAAI,EAA9C;AACD,SAFD,MAEO;AACL,8BAAK,mBAAkBb,gBAAiB,kCAAxC;AACD;AACF;;AACD;AACD,KA5ED;AA6ED;;AAED,QAAMc,mBAAN,GAA4B;AAC1B,QAAI,KAAKzE,OAAL,CAAaI,OAAjB,EAA0B;AACxB,YAAM;AAAEsE,QAAAA,GAAF;AAAOF,QAAAA,GAAP;AAAY3B,QAAAA;AAAZ,UAAoB,MAAM,uBAAc,KAAK9C,UAAnB,EAA+B,EAC7D,GAAG,KAAKC,OADqD;AAE7DwB,QAAAA,QAAQ,EAAE,KAAKA,QAAL,EAFmD;AAG7DmD,QAAAA,WAAW,EAAE;AAHgD,OAA/B,CAAhC;;AAKA,UAAI9B,GAAJ,EAAS;AACP,cAAM,KAAIpC,qBAAJ,EAAgB,wDAAuDoC,GAAI,EAA3E,CAAN;AACD,OAFD,MAEO,IAAI,CAAC2B,GAAD,IAAQA,GAAG,KAAK,EAApB,EAAwB;AAC7B,cAAM,KAAI/D,qBAAJ,EAAe,qDAAf,CAAN;AACD;;AACD,aAAOiE,GAAP;AACD,KAZD,MAYO;AACL,0BAAI,yBAAJ;AACA,YAAME,OAAO,GAAG,MAAMtC,eAAQuC,qBAAR,CAA8B,KAAK9E,UAAnC,EAA+C;AACnEI,QAAAA,cAAc,EAAE,KAAKH,OAAL,CAAaG,cADsC;AAEnEqB,QAAAA,QAAQ,EAAE,KAAKA,QAAL,EAFyD;AAGnEsD,QAAAA,KAAK,EAAE,KAAK5D,QAAL,CAAc4D;AAH8C,OAA/C,CAAtB;;AAKA,UAAI,CAACF,OAAL,EAAc;AACZ,cAAM,KAAInE,qBAAJ,EAAe,kEAAf,CAAN;AACD;;AACD,0BACG,sCAAqCmE,OAAO,CAACG,OAAQ,MAAtD,GACG,kBAAiBH,OAAO,CAACI,aAAc,sBAAqBJ,OAAO,CAACK,aAAc,EAFvF;AAIA,aAAO,CAACL,OAAO,CAACI,aAAT,CAAP;AACD;AACF;;AAED,QAAM/E,IAAN,CAAWiF,OAAX,EAAoB;AAAEC,IAAAA,OAAO,GAAG,IAAZ;AAAkBC,IAAAA,QAAQ,GAAG,EAA7B;AAAiC1C,IAAAA;AAAjC,MAA+C,EAAnE,EAAuE;AACrE,wBAAK,8DAAL;AACA,QAAI2C,OAAO,GAAG,sBAAMC,KAAN,EAAd;AACA,QAAIC,IAAI,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAX;AACA,UAAMC,OAAO,GAAGH,IAAI,GAAG5F,qBAAqB,CAACwF,OAAD,CAA5C;;AACA,WAAOI,IAAI,IAAIG,OAAf,EAAwB;AACtB,YAAMC,GAAG,GAAG,MAAMrD,eAAQC,UAAR,CAAmB,KAAKxC,UAAxB,EAAoC;AACpD0C,QAAAA,OAAO,EAAE,KAD2C;AAEpDD,QAAAA,IAAI,EAAE,QAF8C;AAGpD,YAAIE,SAAS,GAAG;AAAEA,UAAAA;AAAF,SAAH,GAAmB,EAAhC;AAHoD,OAApC,CAAlB;;AAKA,YAAMe,GAAG,GAAGmC,cAAGC,OAAH,CACVD,cAAGE,IADO,EAEVF,cAAGG,MAAH,CAAUtC,GAAG,IAAIyB,OAAO,IAAIzB,GAAG,CAACK,EAAJ,KAAWoB,OAAvC,CAFU,EAGVU,cAAGI,KAAH,CAAS,EAAT,EAAa,MAAb,CAHU,EAIVL,GAJU,CAAZ;;AAMA,cAAQlC,GAAG,CAACY,MAAZ;AACE,aAAK,UAAL;AACEgB,UAAAA,OAAO,CAACY,OAAR,CAAgB,iBAAhB;AACA,iBAAOxC,GAAP;;AACF,aAAK,SAAL;AACA,aAAK,eAAL;AACE4B,UAAAA,OAAO,CAACa,IAAR,GAAe,iBAAf;AACA;;AACF,aAAK,SAAL;AACA,aAAK,aAAL;AACEb,UAAAA,OAAO,CAACa,IAAR,GAAe,sBAAf;AACA;;AACF,aAAK,SAAL;AACEb,UAAAA,OAAO,CAACc,IAAR,CAAa,eAAb;AACA,gBAAM,KAAI1F,qBAAJ,EAAgB,0BAAhB,CAAN;;AACF;AACE4E,UAAAA,OAAO,CAACpD,IAAR,CAAa,iBAAb;AACA,gBAAM,KAAIxB,qBAAJ,EAAgB,mBAAkBgD,GAAG,CAACY,MAAO,cAA7C,CAAN;AAjBJ;;AAmBAkB,MAAAA,IAAI,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAP;AACA,YAAM,2BAAW9F,qBAAqB,CAACyF,QAAD,CAAhC,CAAN;AACD;;AACDC,IAAAA,OAAO,CAACpD,IAAR,CAAa,YAAb;AACA,UAAM,KAAIxB,qBAAJ,EACJ,8FADI,CAAN;AAGD;;AAED,QAAM2F,KAAN,CAAYC,MAAZ,EAAoC;AAClC,UAAM;AAAE3D,MAAAA;AAAF,QAAgB,KAAK1C,OAA3B;AACA,UAAMwB,QAAQ,GAAG,KAAKA,QAAL,EAAjB;AACA,UAAM8E,gBAAgB,GAAG,oBAAI,KAAKpF,QAAT,EAAmB,sBAAnB,CAAzB;AAEA,QAAIqF,IAAI,GAAG;AACT/D,MAAAA,IAAI,EAAE,QADG;AAET6D,MAAAA,MAFS;AAGT7E,MAAAA,QAHS;AAITrB,MAAAA,cAAc,EAAE,KAAKH,OAAL,CAAaG,cAJpB;AAKT,UAAIuC,SAAS,GAAG;AAAEA,QAAAA;AAAF,OAAH,GAAmB,EAAhC;AALS,KAAX;;AAQA,QAAIlB,QAAQ,KAAK,KAAjB,EAAwB;AACtB+E,MAAAA,IAAI,GAAG,EACL,GAAGA,IADE;AAELC,QAAAA,IAAI,EAAE,KAAKxG,OAAL,CAAawG,IAFd;AAGLF,QAAAA;AAHK,OAAP;AAKD,KAND,MAMO,IAAI9E,QAAQ,KAAK,SAAjB,EAA4B;AACjC+E,MAAAA,IAAI,GAAG,EACL,GAAGA,IADE;AAELC,QAAAA,IAAI,EAAE,KAAKxG,OAAL,CAAawG;AAFd,OAAP;AAID,KAxBiC,CA0BlC;;;AACA,UAAM;AAAE1C,MAAAA,EAAE,EAAEoB,OAAN;AAAef,MAAAA,QAAf;AAAyBC,MAAAA;AAAzB,QAAuD,MAAM9B,eAAQC,UAAR,CACjE,KAAKxC,UAD4D,EAEjEwG,IAFiE,CAAnE;AAKA,wBAAI,uDAAJ;AACA,wBACG,qCAAoCrE,iBAAMmB,SAAN,CAAgBO,QAAQ,GAACU,wBAAT,EAAhB,CAAqD,IAD5F;;AAGA,QAAIH,QAAQ,KAAK,QAAb,IAAyBC,yBAA7B,EAAwD;AACtD,0BACE,0FADF;AAGD;;AAED,QAAIc,OAAJ,EAAa;AACX,0BACG,oCAAmChD,iBAAMmB,SAAN,CAClCO,QAAQ,GAACC,qBAAT,CAA+BqB,OAA/B,CADkC,CAElC,IAHJ;AAKD;;AAED,QAAI,KAAKlF,OAAL,CAAaC,IAAjB,EAAuB;AACrB,YAAMwG,QAAQ,GAAG/D,SAAS,GAAG;AAAEA,QAAAA;AAAF,OAAH,GAAmB,EAA7C;AACA,YAAMgE,YAAY,GAAG,MAAM,KAAKzG,IAAL,CAAUiF,OAAV,EAAmBuB,QAAnB,CAA3B;AACA,YAAME,WAAW,GAAGD,YAAY,CAACE,UAAb,GAChBhD,QAAQ,GAACiD,oBAAT,CAA8BH,YAAY,CAACE,UAA3C,CADgB,GAEhBF,YAAY,CAACnC,SAAb,CAAuBC,GAF3B;AAGA,0BAAK,GAAEtC,iBAAM4E,KAAN,CAAY,oCAAZ,CAAkD,IAAG5E,iBAAMmB,SAAN,CAAgBsD,WAAhB,CAA6B,EAAzF;AACD,KAPD,MAOO;AACL,0BAAI,6EAAJ;AACD;AACF;;AAEDnF,EAAAA,QAAQ,GAAG;AACT,WAAO,KAAP;AACD;;AArW8B","file":"../../../commands/build/BaseBuilder.js","sourceRoot":"/expo-cli@3.11.1/src"}